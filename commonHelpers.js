import{a as B,i as c,S as O,l as P}from"./assets/vendor-f97a6336.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();const A="32117995-da98556d394b8c9b5a96c2a58",I="https://pixabay.com/api",M=40;let p=1,f;B.defaults.baseURL=I;const x=()=>{p+=1},R=()=>{p=1},v=()=>f,H=()=>p,L=async e=>{e&&f!==e?(R(),f=e):x();const o=new URLSearchParams({q:e||f,page:p,per_page:M,image_type:"photo",orientation:"horizontal",safesearch:!0,key:A});return await B.get(`/?${o}`)},E={hidden:"visually-hidden"},T={disabled:"disabled"},d=e=>{e.classList.remove(E.hidden)},u=e=>{e.classList.add(E.hidden)},z=e=>{e.removeAttribute(T.disabled)},C=e=>{e.setAttribute(T.disabled,"")},$=e=>Array.isArray(e)&&e.length===0,q=e=>e.replace(/\s+/g," ").trim(),w=e=>{if(e===429)throw c.warning({message:"Too many requests. Limit exceeded. Try again later",position:"topCenter",timeout:8e3}),new Error("Too many requests. Limit exceeded. Try again later")},U=()=>{window.scrollTo({top:0,behavior:"smooth"})},h=e=>{const o=H();return e<o*M},l={loadMoreButton:"Load More Button",infiniteScroll:"Infinite Scroll"},t={form:document.querySelector("form#search-form"),input:document.querySelector('input[name="searchQuery"]'),gallery:document.querySelector("ul.gallery"),submitBtn:document.querySelector('button[type="submit"]'),loadMoreBtn:document.querySelector("button.load-more"),toTopBtn:document.querySelector(".scroll-top-button"),loader:document.querySelector("span.loader"),guard:document.querySelector("div.js-guard")},W=new O(".photo-link");let m=null;const _=()=>{const{height:e}=t.gallery.firstElementChild.getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})},N=e=>{e.innerHTML=""},V=e=>!$(e)&&e.map(o=>{const{webformatURL:i,largeImageURL:s,tags:n,likes:r,views:a,comments:g,downloads:k}=o;return`
        <li class="photo-card">
          <a class="photo-link" href="${s}">
            <img src="${i}" alt="${n}" loading="lazy" width="305" height="200" />
          </a>
          <div class="info">
              <p class="info-item">
                  <b>Likes</b>
                  ${r}
              </p>
              <p class="info-item">
                  <b>Views</b>
                  ${a}
              </p>
              <p class="info-item">
                  <b>Comments</b>
                  ${g}
              </p>
              <p class="info-item">
                  <b>Downloads</b>
                  ${k}
              </p>
          </div>
          
    </li>`}).join(""),S=e=>{const o=V(e);t.gallery.insertAdjacentHTML("beforeend",o),W.refresh()},Y=P(()=>{window.scrollY>=100?d(t.toTopBtn):u(t.toTopBtn)},500),j=e=>{const o=q(e.target.value);o&&o.length>=2?z(t.submitBtn):C(t.submitBtn)},D=async e=>{e.preventDefault();const o=e.target.elements.searchQuery.value,i=q(o);t.form.reset(),C(t.submitBtn),m===l.loadMoreButton&&u(t.loadMoreBtn),m===l.infiniteScroll&&b.unobserve(t.guard),N(t.gallery);try{d(t.loader);const{data:s,status:n}=await L(i);if(u(t.loader),w(n),!s)return;const{hits:r,totalHits:a}=s,g=v();if($(r)){c.warning({message:`Sorry, there are no images matching "${g}". Please try another search`,position:"topCenter",timeout:4e3});return}if(c.success({message:`Hooray! We found ${a} images.`,position:"topCenter",timeout:1500}),S(r),window.addEventListener("scroll",Y),m===l.infiniteScroll){h(a)?c.warning({message:"You've reached the end of search results.",position:"topCenter",timeout:2500}):b.observe(t.guard);return}m===l.loadMoreButton&&(h(a)?(u(t.loadMoreBtn),t.loadMoreBtn.removeEventListener("click",y),c.warning({message:"You've reached the end of search results.",position:"topCenter",timeout:2500})):(d(t.loadMoreBtn),t.loadMoreBtn.addEventListener("click",y)))}catch(s){console.log(s)}},y=async()=>{u(t.loadMoreBtn);try{d(t.loader);const e=v(),{data:o,status:i}=await L(e);if(u(t.loader),w(i),!o)return;const{hits:s,totalHits:n}=o;if(S(s),_(),h(n)){t.loadMoreBtn.removeEventListener("click",y),setTimeout(()=>{c.warning({message:"We're sorry, but you've reached the end of search results.",position:"topCenter",timeout:3500})},1e3),u(t.loadMoreBtn);return}d(t.loadMoreBtn)}catch(e){console.log(e)}},Q=async()=>{try{d(t.loader);const e=v(),{data:o,status:i}=await L(e);if(u(t.loader),w(i),!o)return;const{hits:s,totalHits:n}=o;S(s),h(n)&&(b.unobserve(t.guard),setTimeout(()=>{c.warning({message:"We're sorry, but you've reached the end of search results.",position:"topCenter",timeout:3500})},1e3))}catch(e){console.log(e)}},F=()=>{c.question({timeout:2e4,close:!1,overlay:!0,displayMode:"once",id:"question",zindex:999,message:"Which modes do you want to use?",position:"center",buttons:[[`<button>${l.loadMoreButton}</button>`,function(e,o){e.hide({transitionOut:"fadeOut"},o,`${l.loadMoreButton}`)}],[`<button>${l.infiniteScroll}</button>`,function(e,o){e.hide({transitionOut:"fadeOut"},o,`${l.infiniteScroll}`)}]],onClosed:function(e,o,i){m=i==="timeout"?`${l.loadMoreButton}`:`${i}`}})};F();const K={rootMargin:"300px"},b=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&Q()})},K);t.input.addEventListener("input",j);t.form.addEventListener("submit",D);t.toTopBtn.addEventListener("click",U);
//# sourceMappingURL=commonHelpers.js.map
